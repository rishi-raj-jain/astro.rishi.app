---
const { CONFIG_ID } = Astro.props
---

<script defer is:inline define:vars={{ CONFIG_ID }}>
  if (!CONFIG_ID) return
  const script = document.createElement('script')
  script.setAttribute('src', 'https://www.googletagmanager.com/gtag/js?id=' + CONFIG_ID)
  script.onload = function handleScriptLoaded() {
    window.dataLayer = window.dataLayer || []
    function gtag() {
      dataLayer.push(arguments)
    }
    gtag('js', new Date())
    gtag('config', CONFIG_ID)
  }
  document.head.appendChild(script)
</script>
